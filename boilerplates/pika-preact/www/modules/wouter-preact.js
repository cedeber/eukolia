import{options as n,createContext as t,createElement as r,isValidElement as e,cloneElement as u}from"./preact.js";import{_ as o}from"./common/_rollupPluginBabelHelpers-c197aa7d.js";var i,a,c,f=[],l=n.__r,v=n.diffed,_=n.__c,h=n.unmount;function s(t){n.__h&&n.__h(a);var r=a.__H||(a.__H={t:[],u:[]});return t>=r.t.length&&r.t.push({}),r.t[t]}function m(n){return function(n,t,r){var e=s(i++);return e.__c||(e.__c=a,e.i=[r?r(t):S(void 0,t),function(t){var r=n(e.i[0],t);e.i[0]!==r&&(e.i[0]=r,e.__c.setState({}))}]),e.i}(S,n)}function p(n,t){var r=s(i++);b(r.o,t)&&(r.i=n,r.o=t,a.__H.u.push(r))}function d(n){return y((function(){return{current:n}}),[])}function y(n,t){var r=s(i++);return b(r.o,t)?(r.o=t,r.v=n,r.i=n()):r.i}function g(n,t){return y((function(){return n}),t)}function x(){f.some((function(n){n.__P&&(n.__H.u.forEach(E),n.__H.u.forEach(H),n.__H.u=[])})),f=[]}function E(n){n.m&&n.m()}function H(n){var t=n.i();"function"==typeof t&&(n.m=t)}function b(n,t){return!n||t.some((function(t,r){return t!==n[r]}))}function S(n,t){return"function"==typeof t?t(n):t}n.__r=function(n){l&&l(n),i=0,(a=n.__c).__H&&(a.__H.u.forEach(E),a.__H.u.forEach(H),a.__H.u=[])},n.diffed=function(t){v&&v(t);var r=t.__c;if(r){var e=r.__H;e&&e.u.length&&(1!==f.push(r)&&c===n.requestAnimationFrame||((c=n.requestAnimationFrame)||function(n){var t,r=function(){clearTimeout(e),cancelAnimationFrame(t),setTimeout(n)},e=setTimeout(r,100);"undefined"!=typeof window&&(t=requestAnimationFrame(r))})(x))}},n.__c=function(n,t){t.some((function(n){n.__h.forEach(E),n.__h=n.__h.filter((function(n){return!n.i||H(n)}))})),_&&_(n,t)},n.unmount=function(n){h&&h(n);var t=n.__c;if(t){var r=t.__H;r&&r.t.forEach((function(n){return n.m&&n.m()}))}};var k=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.base,r=void 0===t?"":t,e=m(F(r)),u=o(e,2),i=u[0],a=u[1],c=d(i);p((function(){w();var n=function(){var n=F(r);c.current!==n&&a(c.current=n)},t=["popstate","pushState","replaceState"];return t.map((function(t){return addEventListener(t,n)})),n(),function(){return t.map((function(t){return removeEventListener(t,n)}))}}),[]);var f=g((function(n,t){return history[t?"replaceState":"pushState"](0,0,r+n)}),[]);return[i,f]},A=0,w=function(){if(!A)return["pushState","replaceState"].map((function(n){var t=history[n];history[n]=function(){var r=t.apply(this,arguments),e=new Event(n);return e.arguments=arguments,dispatchEvent(e),r}})),A=1},F=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.pathname;return t.indexOf(n)?t:t.slice(n.length)||"/"};function K(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t={};return function(r,e){var u=function(r){return t[r]||(t[r]=n(r))}(r||""),o=u.regexp,i=u.keys,a=o.exec(e);return a?[!0,i.reduce((function(n,t,r){return n[t.name]=a[r+1],n}),{})]:[!1,null]}}var q=function(n){return n.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")},C=function(n,t,r){var e=n?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return t&&r&&(e="(?:\\/"+e+")"),e+(t?"?":"")},P=function(n){for(var t=/:([A-Za-z0-9_]+)([?+*]?)/g,r=null,e=0,u=[],i="";null!==(r=t.exec(n));){var a=o(r,3),c=(a[0],a[1]),f=a[2],l="+"===f||"*"===f,v="?"===f||"*"===f,_=v&&"/"===n[r.index-1]?1:0,h=n.substring(e,r.index-_);u.push({name:c}),e=t.lastIndex,i+=q(h)+C(l,v,_)}return i+=q(n.substring(e)),{keys:u,regexp:new RegExp("^"+i+"(?:\\/)?$","i")}},T=t({}),$=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.hook,r=void 0===t?k:t,e=n.base,u=void 0===e?"":e,o=n.matcher,i=void 0===o?K():o;return{hook:r,base:u,matcher:i}},j=function(){var n=function(n){var t=a.context[n.__c];if(!t)return n.__;var r=s(i++);return null==r.i&&(r.i=!0,t.sub(a)),t.props.value}(T);return n.v||(n.v=$())},L=function(){var n=j();return n.hook(n)},z=function(n){var t=L(),r=o(t,1)[0];return j().matcher(n,r)},B=function(n){var t=d(null),e=t.current||(t.current={v:$(n)});return r(T.Provider,{value:e,children:n.children})},D=function(n){var t=n.path,e=n.match,u=n.component,i=n.children,a=z(t),c=o(e||a,2),f=c[0],l=c[1];return f?u?r(u,{params:l}):"function"==typeof i?i(l):i:null},I=function(n){var t=L(),i=o(t,2)[1],a=j().base,c=n.href||n.to,f=n.children,l=n.onClick,v=g((function(n){n.ctrlKey||n.metaKey||n.altKey||n.shiftKey||0!==n.button||(n.preventDefault(),i(c),l&&l(n))}),[c,l,i]),_={href:a+c,onClick:v,to:null},h=e(f)?f:r("a",n);return u(h,_)},O=function(n){var t=n.children,r=n.location,i=j().matcher,a=L(),c=o(a,1)[0];t=Array.isArray(t)?t:[t];var f=!0,l=!1,v=void 0;try{for(var _,h=t[Symbol.iterator]();!(f=(_=h.next()).done);f=!0){var s=_.value,m=0;if(e(s)&&s.props.path&&(m=i(s.props.path,r||c))[0])return u(s,{match:m})}}catch(n){l=!0,v=n}finally{try{f||null==h.return||h.return()}finally{if(l)throw v}}return null},R=function(n){var t=L(),r=o(t,2)[1];return function(n,t){var r=s(i++);b(r.o,t)&&(r.i=n,r.o=t,a.__h.push(r))}((function(){r(n.href||n.to)}),[]),null};export default z;export{I as Link,R as Redirect,D as Route,B as Router,O as Switch,L as useLocation,z as useRoute,j as useRouter};
//# sourceMappingURL=wouter-preact.js.map
